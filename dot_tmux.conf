# vim keybindings for copy mode

setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection

# enable focus events
set -g focus-events on

# Set prefix to Ctrl + Space
unbind C-b
set-option -g prefix C-Space
bind C-Space send-prefix

# Start window numbering at 1
set -g base-index 1
setw -g pane-base-index 1

# TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'

# Neovim-Tmux-Navigation integration
set -g @plugin 'christoomey/vim-tmux-navigator'

# Rose Pine Theme
set -g @plugin 'rose-pine/tmux'

# tmux-fzf
set -g @plugin 'sainnhe/tmux-fzf'

set -g @plugin 'vaaleyard/tmux-dotbar'


# Initialize TMUX plugin manager (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'


set -g @rose_pine_variant 'main'

# Quick reload + plugin reinstall (install first to avoid missing plugin errors)
bind-key R run-shell "~/.tmux/plugins/tpm/bin/install_plugins && tmux source-file ~/.tmux.conf"

# Optional: enable mouse and other quality of life settings
set -g mouse on
set -g history-limit 10000
set-option -g allow-rename off

# ----- Copy/paste to system clipboard -----

# Use vi-style copy-mode (so y/Enter work)
setw -g mode-keys vi

# Let tmux talk to the system clipboard (tmux â‰¥ 3.2; uses OSC52 too)
set -g set-clipboard on

# Copy selection to clipboard with y, Enter, or Cmd+C in copy-mode (works over SSH too)
bind -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clipcopy"
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clipcopy"
bind -T copy-mode-vi C-c   send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clipcopy"

# Also copy when you finish a mouse drag selection
#bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clipcopy"

# ----- Dooit floating todo pane -----
bind-key t display-popup -E -w 80% -h 80% "dooit"
